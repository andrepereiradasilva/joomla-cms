function sendPermissions(e){var t=document.getElementById("icon_"+this.id);t.removeAttribute("class"),t.setAttribute("style","background: url(../media/system/images/modal/spinner.gif); display: inline-block; width: 16px; height: 16px");var a="not",r=getUrlParam("component"),s=getUrlParam("extension"),l=getUrlParam("option"),o=getUrlParam("view"),n=r,i=this.value;"com_config"==l&&0==r&&0==s?a="root.1":0==s&&"component"==o?a=r:0!=s&&0!=o?(a=s+"."+o+"."+getUrlParam("id"),n=document.getElementById("jform_title").value):0==s&&0!=o&&(a="com_languages"==l&&"language"==o?l+"."+o+"."+getUrlParam("lang_id"):l+"."+o+"."+getUrlParam("id"),n=document.getElementById("jform_title").value);var m=this.id.replace("jform_rules_",""),c=m.lastIndexOf("_"),u=m.substring(0,c),d=m.substring(c+1),g="&comp="+a+"&action="+u+"&rule="+d+"&value="+i+"&title="+n,_="index.php?option=com_config&task=config.store&format=raw"+g;jQuery.ajax({type:"GET",url:_,datatype:"JSON"}).success(function(a){var r=e.target,s=JSON.parse(a);if("true"==s.data)t.removeAttribute("style"),t.setAttribute("class","icon-save"),"1"==i?jQuery(r).parents().next("td").find("span").removeClass("label label-important").addClass("label label-success").html(Joomla.JText._("JLIB_RULES_ALLOWED")):jQuery(r).parents().next("td").find("span").removeClass("label label-success").addClass("label label-important").html(Joomla.JText._("JLIB_RULES_NOT_ALLOWED"));else{var l={error:[Joomla.JText._("JLIB_RULES_DATABASE_FAILURE ")]};Joomla.renderMessages(l),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")}if(0==s.message){var l={error:[Joomla.JText._("JLIB_RULES_SAVE_BEFORE_CHANGE_PERMISSIONS")]};Joomla.renderMessages(l),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")}}).fail(function(){var e={error:[Joomla.JText._("JLIB_RULES_REQUEST_FAILURE")]};Joomla.renderMessages(e),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")})}function getUrlParam(e){for(var t=window.location.search.substring(1),a=t.split("&"),r=0;r<a.length;r++){var s=a[r].split("=");if(s[0]==e)return s[1]}return!1}